Riemann Integral
================
Assume :math:`f` is a bounded function on :math:`[a,b]`. Also assume that :math:`f\geq 0` on this interval. If :math:`a_i` is a finite increasing sequence such that :math:`a_0=a` and :math:`a_n=b`, we call it a division of :math:`[a,b]`. If :math:`a_i` is a division, for :math:`[a_i,a_{i+1}]`, we know that :math:`f` is bounded there, and so it has a least upper bound. We will call that :math:`f^u[a_i,a_{i+1}]`. Now we can define the upper step-sum of :math:`f` on a division as `f^u[a_0,a_1](a_1-a_0)+...+f^u[a_{n-1},a_n](a_n-a_{n_1})`. If :math:`f` is bounded from above by :math:`M`, this sum is between than :math:`M[b-a]` and :math:`0`.

If :math:`a_i` is a division, and :math:`a'_j` is a division such that for every :math:`i` there is a :math:`j` such that :math:`a'_j=a_i`, then we say that :math:`a'_j` is a subdivision of :math:`a_i`. If :math:`a'_j` is a subdivision of :math:`a_i`, then we can prove that the step-sum of :math:`f` on :math:`a'` is less or equal to than the step-sum of :math:`f` on :math:`a`. Since both are finite, in particular there are only a finite number of :math:`a'_j` not in :math:`a_i`. Therefore, we can prove this by induction on the number of elements in :math:`a'` which are not in :math:`a`. If there are :math:`0`, the divisions are the same. Assume it is true when there are :math:`n` elements in :math:`a'` which are not in :math:`a`, and assume that :math:`a'` has :math:`n+1` such elements. Let :math:`j_0` be an element of :math:`a'` not in :math:`a`. We define :math:`a''_i=a'_i` if :math:`i<j_0` and :math:`a''_i=a'_{i+1}` otherwise. Then :math:`a''` only has :math:`n` items, and so the step sum on :math:`a''` is less than that on :math:`a`. However, the step sum on :math:`a'` and :math:`a''` only differ in that in the latter, the term :math:`f^u[a'_{j_0-1},a'_{j_0+1}](a'_{j_0+1}-a'_{j_0-1})` appears while in the former, :math:`f^u[a'_{j_0-1},a'_j_0](a'_j_0-a'_{j_0-1})+f^u[a'_j_0,a'_{j_0+1}](a'_{j_0+1}-a'_j_0)`. But since :math:`f^u[a'_{j_0-1},a'_{j_0+1}]\geq f^u[a'_{j_0-1},a'_j_0],f^u[a'_j_0,a'_{j_0+1}]`, the former is less or equal to the latter, and so the step-sum on :math:`a'` is less or equal to the step-sum on :math:`a''`, as required.

If :math:`a_i` is a division and :math:`a'_i` is a different division, we can define a common subdivision of both, by induction: :math:`a''_0=a`, and if we have :math:`a''_i`, we define :math:`a''_{i+1}` as the least of :math:`a'` and :math:`a` that is greater than :math:`a''_i`.

We can define the lower step-sum analogously by taking the infimum of :math:`f` on the intervals. The analogous results hold, with inequality signs reversed.

We define the integral of :math:`f` from :math:`a` to :math:`b` to be the least upper step-sum of :math:`f` and the highest lower step-sum of :math:`f`. If they are different, :math:`f` does not have an integral (or, more properly, a Riemann integral).

Any continuous function has an integral, as the difference between the upper step-sum and the lower step sum of a division is no more than :math:`\epsilon` is any two elements in the division are no more than :math:`\delta` apart, and :math:`\delta` corresponds to :math:`\epsilon` for uniform continuouity, and there are always such divisions -- since if :math:`1/n<\delta/(b-a)`, then `a_i=a+(b-a)i/n` is such a division.

Assume that :math:`f` is bounded. We define :math:`f^+=(|f|+f)/2`, :math:`f^-=(|f|-f)/2`. If :math:`f` is bounded, so are :math:`f^+` and :math:`f^-`, which are both non-negative. :math:`f=f^+-f^-`. We define the integral of :math:`f` as the integral of :math:`f^+` minus the integral of :math:`f^-`. We will note that if :math:`f` is continuous, then so is :math:`|f|` and then so are :math:`f^+` and :math:`f^-`, and therefore any continuous function, not necessarily non-negative, still has an integral.

It is trivial to prove that :math:`\integral_a^b f=\integral_a^c f + \integral_c^b f` -- for any division, have a subdivision that includes :math:`c`.

It is also trivial to prove that if :math:`m<f<M` then :math:`m(b-a)\leq \integral_a^b f\leq M(b-a)`.

Assume :math:`f` is continuous. :math:`\integral_a^{x+h) f-\integral_a^x = \integral_x^{x+h} f`. If :math:`\delta` is such that :math:`0<h<\delta` such that :math:`|f(x+h)-f(x)|<\epsilon`, then for such :math:`h`, :math:`0\leq f\leq h` implies :math:`f(x)-\epsilon<f(x+f)<f(x)+\epsilon`, and so :math:`f(x)-\epsilon<(\integral_x^{x+h} f)/h<f(x)+\epsilon`. Analogous proof shows the same for :math:`h<0`, and so the derivative of :math:`\integral_a^x f` is :math:`f(x)` when :math:`f` is continuous.

Now assume that :math:`f` is a function, and :math:`f'` is continuous. Then the derivative of the integral of :math:`f'` and the derivative of :math:`f` are the same. Therefore, the derivative of their difference is always :math:`0`. As a consequence of Roll's theorem, if the derivative is identically :math:`0`, the difference is constant. So, the integral of the derivative of a function differs from the function by a constant. This is the fundamental theorem of calculus.
